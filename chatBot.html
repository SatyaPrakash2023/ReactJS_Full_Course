<!DOCTYPE html>
<html>
  <head>
    <title>Chat Bot</title>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const container = document.querySelector('.js-container');
      function ChatBotInput({chatMessages, setChatMessages}){

        const [inputText, setInputText] = React.useState('');

        function saveInputTextToState(event){
          setInputText(event.target.value);
        
        }

        function sendMessage(){
          setChatMessages([
            ...chatMessages, {
            message: inputText,
            sender: "User",
            id: `Uk0${chatMessages.length + 1}`
          }]);
          // console.log("Send Message button clicked with message:", inputText);
          setInputText('');
        }

        return (
          <>
              <input placeholder="Send a message to chatbot" id="messageInputBar" size="30" autocomplete="off" onChange={saveInputTextToState} value={inputText}/>
              <button onClick={sendMessage}>Send</button>
          </>        
       )
       // return <input placeholder="Type yout message here"></input>;  
      };

      function ChatMessage({message, sender }){
        //const message = props.message;//Alternate way to write const {message} = props;
        //const sender = props.sender;//A;lternate way to write const {sender} = props;
        // //If you want to extract multiple properties you can do like const {message, sender} = props;
        //const {message,sender} = props; //Destructuring assignment
        /*if(sender === "chiti"){
          return (
            <div>
              <img src="chatbotImage.png" width="50p"/>//Commented for better approach in return statement below
              {message}
            </div>
          );
        }
        */
        return (
          <div>
            {sender==='chiti'&& <img src="chatbotImage.png" width="50p"/>}
            {message}
            {sender ==='User' && <img src="UserProfileImage.png" width="50p"/>}
          </div>
        );
      }

      function ChatMessages({chatMessages}){
        
        return (
          <>
            {chatMessages.map((chatMessages)=>{
              return (
                <ChatMessage message={chatMessages.message} sender={chatMessages.sender} key={chatMessages.id} />
              );
            })}
          </>
        );  
      }

      function App(){

        const [chatMessages,setChatMessages] = React.useState([{
            message: "hello chatBot",
            sender: "User",
            id: 'Uk01'
          },{
            message: "Hello! I am chiti how can i help you ?",
            sender: "chiti",
            id: 'Ch01'
          },{
            message: "Can you get me today's date ?",
            sender: "User",
            id: 'Uk02'
          },{
            message: "Today is 9th NOV 2025",
            sender: "chiti",
            id: 'Ch02' 
         }]);
        
        // const chatMessage = arrayMessage[0];
        // const setChatMessage = arrayMessage[1];
        //const [chatMessage, setChatMessage] = arrayMessage; 
        // function sendMessage(){
        //   console.log("Send Message button clicked");
        //   const messageInputBar = document.getElementById('messageInputBar');
        //   const newMessage = messageInputBar.value;
        //   setChatMessage([
        //     ...chatMessage, {
        //     message: newMessage,
        //     sender: "User",
        //     id: `Uk0${chatMessage.length + 1}`
        //   }]);
        //   console.log(chatMessage);
        //   messageInputBar.value = '';
        // } 


        return (
          <>
            <ChatBotInput  chatMessages={chatMessages} setChatMessages={setChatMessages}/>
            <ChatMessages chatMessages={chatMessages} />
          </>
        );
      }

      ReactDOM.createRoot(container).render(<App/>);
    </script>
  </body>
</html>
